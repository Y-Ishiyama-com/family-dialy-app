<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Diary App - ãƒ†ã‚¹ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            padding: 2rem;
        }
        h1 {
            color: #333;
            margin-bottom: 0.5rem;
        }
        .subtitle {
            color: #666;
            margin-bottom: 2rem;
        }
        .section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f9f9f9;
            border-radius: 8px;
        }
        .section h2 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        .test-item {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            border: 2px solid #e0e0e0;
            transition: all 0.2s;
        }
        .test-item:hover {
            border-color: #667eea;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }
        .test-item h3 {
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: #333;
        }
        .test-item p {
            font-size: 0.85rem;
            color: #666;
            margin-bottom: 0.75rem;
        }
        .btn {
            display: inline-block;
            padding: 0.6rem 1.2rem;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background 0.2s;
            border: none;
            cursor: pointer;
        }
        .btn:hover {
            background: #5568d3;
        }
        .btn-secondary {
            background: #6c757d;
        }
        .btn-secondary:hover {
            background: #5a6268;
        }
        .status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .status.running {
            background: #d4edda;
            color: #155724;
        }
        .status.stopped {
            background: #f8d7da;
            color: #721c24;
        }
        .log {
            background: #2d2d2d;
            color: #00ff00;
            padding: 1rem;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 1rem;
        }
        button {
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“” Family Diary App - ãƒ†ã‚¹ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
        <p class="subtitle">ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®çµ±åˆãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«</p>

        <!-- Server Status -->
        <div class="section">
            <h2>ğŸ–¥ï¸ ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹</h2>
            <div class="test-grid">
                <div class="test-item">
                    <h3>ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ (FastAPI)</h3>
                    <p>http://localhost:8000</p>
                    <span class="status running">â— ç¨¼åƒä¸­</span>
                    <div>
                        <a href="http://localhost:8000" target="_blank" class="btn">API Root</a>
                        <a href="http://localhost:8000/docs" target="_blank" class="btn">Swagger UI</a>
                    </div>
                </div>
                <div class="test-item">
                    <h3>ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ (Vite)</h3>
                    <p>http://localhost:3000</p>
                    <span class="status running">â— ç¨¼åƒä¸­</span>
                    <div>
                        <a href="http://localhost:3000" target="_blank" class="btn">ã‚¢ãƒ—ãƒªã‚’é–‹ã</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Frontend Pages -->
        <div class="section">
            <h2>ğŸŒ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ ãƒšãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ</h2>
            <div class="test-grid">
                <div class="test-item">
                    <h3>ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸</h3>
                    <p>èªè¨¼UIã€ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤ºç¢ºèª</p>
                    <a href="http://localhost:3000/" target="_blank" class="btn">é–‹ã</a>
                </div>
                <div class="test-item">
                    <h3>æ—¥è¨˜ãƒšãƒ¼ã‚¸</h3>
                    <p>ã‚¨ãƒ³ãƒˆãƒªç·¨é›†ã€å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</p>
                    <button class="btn" disabled>èªè¨¼å¿…è¦</button>
                </div>
                <div class="test-item">
                    <h3>ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸</h3>
                    <p>å®¶æ—ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã€æœˆåˆ¥è¡¨ç¤º</p>
                    <button class="btn" disabled>èªè¨¼å¿…è¦</button>
                </div>
            </div>
        </div>

        <!-- API Endpoints -->
        <div class="section">
            <h2>ğŸ“¡ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒ†ã‚¹ãƒˆ</h2>
            <button class="btn" onclick="testHealth()">Health Check</button>
            <button class="btn" onclick="testRoot()">Root Endpoint</button>
            <button class="btn" onclick="testOpenAPI()">OpenAPI Schema</button>
            <button class="btn btn-secondary" onclick="clearLog()">ãƒ­ã‚°ã‚¯ãƒªã‚¢</button>
            <div class="log" id="log">
ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™...
            </div>
        </div>

        <!-- Integration Test -->
        <div class="section">
            <h2>ğŸ§ª çµ±åˆãƒ†ã‚¹ãƒˆ</h2>
            <button class="btn" onclick="runIntegrationTest()">ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ</button>
            <p style="margin-top: 1rem; font-size: 0.9rem; color: #666;">
                Backend APIã€CORSã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒãƒ¼ã®å‹•ä½œã‚’ä¸€æ‹¬ç¢ºèªã—ã¾ã™
            </p>
        </div>
    </div>

    <script>
        const log = document.getElementById('log');
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â„¹ï¸';
            log.innerHTML += `[${timestamp}] ${prefix} ${message}\n`;
            log.scrollTop = log.scrollHeight;
        }

        function clearLog() {
            log.innerHTML = 'ãƒ­ã‚°ãŒã‚¯ãƒªã‚¢ã•ã‚Œã¾ã—ãŸ...\n';
        }

        async function testHealth() {
            addLog('Health Check ãƒ†ã‚¹ãƒˆé–‹å§‹...');
            try {
                const response = await fetch('http://localhost:8000/health');
                const data = await response.json();
                addLog(`Health Check: ${JSON.stringify(data)}`, 'success');
            } catch (error) {
                addLog(`Health Check å¤±æ•—: ${error.message}`, 'error');
            }
        }

        async function testRoot() {
            addLog('Root Endpoint ãƒ†ã‚¹ãƒˆé–‹å§‹...');
            try {
                const response = await fetch('http://localhost:8000/');
                const data = await response.json();
                addLog(`Root: ${JSON.stringify(data)}`, 'success');
            } catch (error) {
                addLog(`Root Endpoint å¤±æ•—: ${error.message}`, 'error');
            }
        }

        async function testOpenAPI() {
            addLog('OpenAPI Schema ãƒ†ã‚¹ãƒˆé–‹å§‹...');
            try {
                const response = await fetch('http://localhost:8000/openapi.json');
                const data = await response.json();
                addLog(`OpenAPI version: ${data.openapi}, Endpoints: ${Object.keys(data.paths).length}`, 'success');
            } catch (error) {
                addLog(`OpenAPI Schema å¤±æ•—: ${error.message}`, 'error');
            }
        }

        async function runIntegrationTest() {
            clearLog();
            addLog('=== çµ±åˆãƒ†ã‚¹ãƒˆé–‹å§‹ ===');
            await testRoot();
            await testHealth();
            await testOpenAPI();
            addLog('=== çµ±åˆãƒ†ã‚¹ãƒˆå®Œäº† ===', 'success');
        }

        // åˆæœŸãƒ­ã‚°
        addLog('ãƒ†ã‚¹ãƒˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æº–å‚™å®Œäº†');
        addLog('Backend: http://localhost:8000');
        addLog('Frontend: http://localhost:3000');
    </script>
</body>
</html>
